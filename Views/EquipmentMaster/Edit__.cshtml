@model Calibration_Management_System.Models.EquipmentRegistration

@{
    ViewData["Title"] = "Create";
}

<h1>Equipment</h1>

<h4>Registration Update</h4>
<hr />
<form asp-action="Edit" enctype="multipart/form-data">
    <div class="container">
        <div class="row">
            <div asp-validation-summary="ModelOnly" class="text-danger"></div>
            <div class="col-md-3">
                 <div class="form-group">
                    <label asp-for="fld_codeNo" class="control-label"></label>
                    <input required asp-for="fld_codeNo" class="form-control" />
                    <span asp-validation-for="fld_codeNo" class="text-danger"></span>
                </div>
                <div class="form-group">
                    <label asp-for="fld_ctrlNo" class="control-label"></label>
                    <input required asp-for="fld_ctrlNo" class="form-control" />
                    <span asp-validation-for="fld_ctrlNo" class="text-danger"></span>
                </div>
                <div class="form-group">
                    <label asp-for="fld_division" class="control-label"></label>
                    <select required asp-for="fld_division" asp-items="@(ViewBag.Dept)" class="form-control"></select>
                    <span asp-validation-for="fld_division" class="text-danger"></span>
                </div>
                <div class="form-group">
                    <label asp-for="fld_category" class="control-label"></label>
                    <select required asp-for="fld_category" asp-items="@(ViewBag.Category)" class="form-control"></select>
                    <span asp-validation-for="fld_category" class="text-danger"></span>
                </div>
            </div>
            
            <div class="col-md-3">
                <div class="form-group">
                    <label  class="control-label">User Function Code</label>
                    <select required asp-for="fld_code2" asp-items="@(ViewBag.EqpCode)" class="form-control"></select>
                    <span asp-validation-for="fld_code2" class="text-danger"></span>
                </div>
                <div class="form-group">
                    <label asp-for="fld_eqpName" class="control-label"></label>
                    <input required asp-for="fld_eqpName" class="form-control" />
                    <span asp-validation-for="fld_eqpName" class="text-danger"></span>
                </div>
                <div class="form-group">
                    <label asp-for="fld_eqpModelNo" class="control-label"></label>
                    <input required asp-for="fld_eqpModelNo" class="form-control" />
                    <span asp-validation-for="fld_eqpModelNo" class="text-danger"></span>
                </div>
                <div class="form-group">
                    <label asp-for="fld_serial" class="control-label"></label>
                    <input required asp-for="fld_serial" class="form-control" />
                    <span asp-validation-for="fld_serial" class="text-danger"></span>
                </div>
            </div>
            
            <div class="col-md-3">
                <div class="form-group">
                    <label asp-for="fld_brand" class="control-label"></label>
                    <input required asp-for="fld_brand" class="form-control" />
                    <span asp-validation-for="fld_brand" class="text-danger"></span>
                </div>
                <div class="form-group">
                    <label asp-for="fld_term" class="control-label"></label>
                    <select required asp-for="fld_term" asp-items="@(ViewBag.Terms)" onchange="updateCalibrationDate()" class="form-control"></select>
                    <span asp-validation-for="fld_term" class="text-danger"></span>
                </div>
                <div class="form-group">
                    <label asp-for="fld_reqFunction" class="control-label"></label>
                    <select required asp-for="fld_reqFunction" asp-items="@(ViewBag.Dept)" class="form-control"></select>
                    <span asp-validation-for="fld_reqFunction" class="text-danger"></span>
                </div>
                <div class="form-group">
                    <label asp-for="fld_passFail" class="control-label"></label>
                    <select required asp-for="fld_passFail" asp-items="@(ViewBag.Status)" class="form-control"></select>
                    <span asp-validation-for="fld_passFail" class="text-danger"></span>
                </div>
            </div>

            <div class="col-md-3">
                <div class="form-group">
                    <label asp-for="fld_registrationDate" class="control-label"></label>
                    <input required type="date" id="myDateInput" asp-for="fld_registrationDate" class="form-control" />
                    <span asp-validation-for="fld_registrationDate" class="text-danger"></span>
                </div>
                <div class="form-group">
                    <label  class="control-label">Expiration Period</label>
                    <select required asp-for="fld_imte" id="expirationSelect" onchange="updateCalibrationDate()" class="form-control">
                        <option value="">Select</option>
                        <option value="sameDateExpiration">Same Date Expiration</option>
                        <option value="endOfMonthExpiration">End of Month Expiration</option>
                        <option value="november30Expiration">November 30 Expiration</option>
                    </select>
                    <span asp-validation-for="fld_imte" class="text-danger"></span>
                </div>
                <div class="form-group">
                    <label asp-for="fld_calibDate" class="control-label"></label>
                    <input required type="date" id="calibrationDateInput" onchange="updateCalibrationDate()" asp-for="fld_calibDate" class="form-control" />
                    <span asp-validation-for="fld_calibDate" class="text-danger"></span>
                </div>
                <div class="form-group">
                    <label asp-for="fld_calibMonth" class="control-label"></label>
                    <select required asp-for="fld_calibMonth" asp-items="@(ViewBag.Months)" class="form-control"></select>
                    <span asp-validation-for="fld_calibMonth" class="text-danger"></span>
                </div>
            </div>
            <hr style="border-top: 3px double #000000;" />
            <div class="col-md-6">
                 <div class="form-group">
                    <label asp-for="fld_calibYear" class="control-label"></label>
                    <input type="number" asp-for="fld_calibYear" id="calibrationYearInput" readonly class="form-control" />
                    <span asp-validation-for="fld_calibYear" class="text-danger"></span>
                </div>
                <div class="form-group">
                    <label asp-for="fld_nextCalibDate" class="control-label"></label>
                    <input type="date" id="nextCalibrationDateInput" readonly asp-for="fld_nextCalibDate" class="form-control" />
                    <span asp-validation-for="fld_nextCalibDate" class="text-danger"></span>
                </div>
                <div class="form-group">
                    <label asp-for="fld_nextCalibMonth" class="control-label"></label>
                    <input asp-for="fld_nextCalibMonth" id="nextCalibrationMonthInput" readonly class="form-control" />
                    <span asp-validation-for="fld_nextCalibMonth" class="text-danger"></span>
                </div>
                <div class="form-group">
                    <label asp-for="fld_nextCalibYear" class="control-label"></label>
                    <input type="number" id="nextCalibrationYearInput" readonly asp-for="fld_nextCalibYear" class="form-control" />
                    <span asp-validation-for="fld_nextCalibYear" class="text-danger"></span>
                </div>
            </div>
            <div class="col-md-6">
                <div class="form-group">
                    <label asp-for="fld_internalExternal" class="control-label"></label>
                    <select asp-for="fld_internalExternal" asp-items="@(ViewBag.IntExt)" class="form-control"></select>
                    <span asp-validation-for="fld_internalExternal" class="text-danger"></span>
                </div>
                <div class="form-group">
                    <label asp-for="fld_supplierExternal" class="control-label"></label>
                    <input asp-for="fld_supplierExternal" class="form-control" />
                    <span asp-validation-for="fld_supplierExternal" class="text-danger"></span>
                </div>
                <div class="form-group">
                    <label asp-for="fld_comment" class="control-label"></label>
                    <input asp-for="fld_comment" class="form-control" />
                    <span asp-validation-for="fld_comment" class="text-danger"></span>
                </div>
                <div class="form-group">
                    <label asp-for="fld_appStandardEqp" class="control-label"></label>
                    <input asp-for="fld_appStandardEqp" class="form-control" />
                    <span asp-validation-for="fld_appStandardEqp" class="text-danger"></span>
                </div>
            </div>
            <hr style="border-top: 3px double #000000;" />
            <div class="col-md-6">
                <div class="form-group"><div>
                        <div class="form-group">
                            <label for="_pathIMG">Image Upload:</label>
                            <input type="file" id="_pathIMG" name="_pathIMG" class="form-control-file" />
                        </div>

                        <div class="form-group">
                            <label for="_pathDoc">PDF Upload:  &nbsp;&nbsp;</label>
                            <input type="file" id="_pathDoc" name="_pathDoc" class="form-control-file" />
                        </div>

                </div>

                    <div class="form-group">
                       
                    <label asp-for="fld_stat" class="control-label"></label>
                        <select required asp-for="fld_stat" class="form-control">
                            <option value="">Select</option>
                            <option value="OK">OK</option>
                            <option value="SUSPENDED">SUSPENDED</option>
                            <option value="DISPOSED">DISPOSED</option>
                        </select>
                    <span asp-validation-for="fld_stat" class="text-danger"></span>
                </div>
            </div>
            <div class="col-md-6">
                <div class="form-group paddingTop">
                    <input type="submit" value="Create" class="btn btn-primary" />
                    <a style="padding-left:20px" asp-action="Index">Back to List</a>
                </div>
            </div>






                
                

           
        </div>
    </div>
    </div>

</form>


@section Scripts {
    @{await Html.RenderPartialAsync("_ValidationScriptsPartial");}
    


    <script>
        //function updateCalibrationDate() {
        //    var termSelect = document.getElementById('fld_term');
        //    var expirationSelect = document.getElementById('expirationSelect');
        //    var calibrationDateInput = document.getElementById('calibrationDateInput');
        //    var nextCalibrationDateInput = document.getElementById('nextCalibrationDateInput');
        //    var nextCalibrationMonthInput = document.getElementById('nextCalibrationMonthInput');
        //    var nextCalibrationYearInput = document.getElementById('nextCalibrationYearInput');
        //    var calibrationYearInput = document.getElementById('calibrationYearInput');

        //    var term = parseInt(termSelect.value);
        //    var expiration = expirationSelect.options[expirationSelect.selectedIndex].value;
        //    var calibrationDate = new Date(calibrationDateInput.value);

        //    if (isNaN(calibrationDate.getTime())) {
        //        // Return early if the calibration date is invalid
        //        nextCalibrationDateInput.value = '';
        //        nextCalibrationMonthInput.value = '';
        //        nextCalibrationYearInput.value = '';
        //        calibrationYearInput.value = '';
        //        return;
        //    }


            

        //    var calibYear = new Date(calibrationDate);
        //    var year = calibYear.getFullYear();

        //    calibrationYearInput.value = year;

        //            // Calculate the next calibration date based on the selected term and expiration period
        //    var nextCalibrationDate = new Date(calibrationDate);
        //    var year = nextCalibrationDate.getFullYear();
        //    var month = nextCalibrationDate.getMonth();

        //    if (expiration === 'sameDateExpiration') {
        //        nextCalibrationDate.setMonth(month + term);
        //    } else if (expiration === 'endOfMonthExpiration') {
        //        nextCalibrationDate.setMonth(month + term + 1, 0);
        //    } else if (expiration === 'november30Expiration') {
        //        nextCalibrationDate.setFullYear(year + Math.floor(term / 12));
        //        nextCalibrationDate.setMonth(10, 30);
        //    }

        //    // Format the next calibration date as "yyyy-MM-dd"
        //    var formattedDate = nextCalibrationDate.toISOString().split('T')[0];

        //    // Update the next calibration date input
        //    nextCalibrationDateInput.value = formattedDate;
        //    nextCalibrationMonthInput.value = (nextCalibrationDate.getMonth() + 1).toString().padStart(2, '0');
        //    nextCalibrationYearInput.value = nextCalibrationDate.getFullYear().toString();
        //}


    </script>
    


}
